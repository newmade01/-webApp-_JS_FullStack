(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92f5d2a0"],{"1ec4":function(e,n,r){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function e(n){t(this,e),this.id=n.deviceId,this.label=n.label};n.default=a},"2bee":function(e,n,r){"use strict";r("b2fe")},5363:function(e,n,r){},"98f5":function(e,n,r){"use strict";(function(e){r("5363");var t=r("b935"),a=r("db16"),i=r.n(a),s={computed:{hasHeader:function(){return"undefined"!==typeof this.$slots.header&&null!==this.$slots.header},multiDevice:function(){return!!this.camera&&this.camera.devices.length>1}},data:function(){return{camera:null,canvasElementId:"canvas-"+Object(t["a"])().replace(/-/g,""),canvas:null,picture:null,pictureDataUrl:null,switching:!1,video:null,videoElementId:"video-"+Object(t["a"])().replace(/-/g,""),visibleMask:!1}},methods:{approve:function(){this.$emit("input",this.picture),this.$emit("approve",this.picture)},close:function(){this.stop(),this.$emit("close")},snapAsBlob:function(){var e=this;if(this.camera)return new Promise((function(n){e.camera.snapAsBlob().then((function(r){e.picture=r,n(r)}))}));console.error("Camera not found to take a picture")},snapAsDataUrl:function(){if(this.camera)return this.picture=this.camera.snapAsDataUrl(),this.stop(),this.mustApprove||this.$emit("input",this.picture),this.picture;console.error("Camera not found to take a picture")},start:function(){var e=this;return this.camera?(this.picture=null,this.$emit("input",null),this.$emit("loading",!0),void this.camera.start().finally((function(){return e.$emit("loading",!1)}))):(this.video=document.getElementById(this.videoElementId),this.canvas=document.getElementById(this.canvasElementId),new Promise((function(n){i.a.tryInvokePermission(e.video,e.canvas).then((function(r){e.camera=r,n(r)}))})))},stop:function(){this.camera&&this.camera.stop()},switchCamera:function(e){var n=this;if(void 0===e&&(e=!1),!this.switching||e){if(this.camera)return this.switching=!0,new Promise((function(r,t){n.camera.switch(e).then((function(){n.switching=!1,r()})).catch((function(){e?(n.switching=!1,t()):n.switchCamera(!0)}))}));console.error("No camera found to switch...")}}},mounted:function(){this.startOnMounted&&(this.$emit("loading",!0),this.start().then((function(e){e&&e.start()})).finally(this.$emit("loading",!1)))},name:"fullscreen-view-camera",props:{fullscreenZIndex:Number,mustApprove:Boolean,overlayMask:String,startOnMounted:Boolean,visibleOverlay:Boolean},watch:{picture:function(){var e=this;if(this.picture||(this.pictureDataUrl=null),this.picture instanceof Blob){var n=new FileReader;n.readAsDataURL(this.picture),n.onload=function(){e.pictureDataUrl=n.result}}else this.pictureDataUrl=this.picture}}};function o(e,n,r,t,a,i,s,o,c,l){"boolean"!==typeof s&&(c=o,o=s,s=!1);var u,d="function"===typeof r?r.options:r;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),t&&(d._scopeId=t),i?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=u):n&&(u=s?function(e){n.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,o(e))}),u)if(d.functional){var m=d.render;d.render=function(e,n){return u.call(n),m(e,n)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,u):[u]}return r}var c,l="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function u(e){return function(e,n){return m(e,n)}}var d={};function m(e,n){var r=l?n.media||"default":e,t=d[r]||(d[r]={ids:new Set,styles:[]});if(!t.ids.has(e)){t.ids.add(e);var a=n.source;if(n.map&&(a+="\n/*# sourceURL="+n.map.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),t.element||(t.element=document.createElement("style"),t.element.type="text/css",n.media&&t.element.setAttribute("media",n.media),void 0===c&&(c=document.head||document.getElementsByTagName("head")[0]),c.appendChild(t.element)),"styleSheet"in t.element)t.styles.push(a),t.element.styleSheet.cssText=t.styles.filter(Boolean).join("\n");else{var i=t.ids.size-1,s=document.createTextNode(a),o=t.element.childNodes;o[i]&&t.element.removeChild(o[i]),o.length?t.element.insertBefore(s,o[i]):t.element.appendChild(s)}}}var p=s,h=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"fullscreen-camera",style:{"z-index":e.fullscreenZIndex}},[r("div",{staticClass:"camera-stack"},[r("div",{staticClass:"camera-stack-header"},[e._t("header"),e._v(" "),e.hasHeader?e._e():r("a",{staticClass:"close-button",attrs:{role:"button"},on:{click:e.close}},[e._v("Ã—")])],2),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.picture,expression:"!picture"}],staticClass:"video-wrapper"},[r("video",{attrs:{id:e.videoElementId,autoplay:"",playsinline:""}}),e._v(" "),r("div",{staticClass:"overlay-mask",class:{"visible-overlay":e.visibleOverlay}},[e.visibleMask?r("img",{attrs:{src:e.overlayMask}}):e._e()])]),e._v(" "),r("canvas",{staticStyle:{display:"none"},attrs:{id:e.canvasElementId}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.picture,expression:"picture"}],staticClass:"camera-snap",style:{"background-image":"url("+e.pictureDataUrl+")"}}),e._v(" "),r("div",{staticClass:"camera-stack-controls",class:{background:!!e.picture}},[r("div",{staticClass:"camera-stack-controls-wrapper"},[r("div",{staticClass:"control-slot"},[e.overlayMask&&!e.picture?r("a",{staticClass:"secondary-button",attrs:{role:"button"},on:{click:function(n){e.visibleMask=!e.visibleMask}}},[r("i",{staticClass:"mdi mdi-grid-large"})]):e._e()]),e._v(" "),r("div",{staticClass:"control-slot"},[e.picture?e._e():r("a",{attrs:{role:"button"},on:{click:function(n){return e.$emit("snap")}}},[r("i",{staticClass:"mdi mdi-circle"})]),e._v(" "),e.picture&&e.mustApprove?r("a",{attrs:{role:"button"},on:{click:e.approve}},[r("i",{staticClass:"mdi mdi-check"})]):e._e()]),e._v(" "),r("div",{staticClass:"control-slot"},[e.multiDevice&&!e.picture?r("a",{staticClass:"secondary-button",attrs:{disabled:e.switching,role:"button"},on:{click:function(n){return e.switchCamera(!1)}}},[r("i",{staticClass:"mdi mdi-camera-switch"})]):e._e(),e._v(" "),e.picture?r("a",{staticClass:"secondary-button",attrs:{role:"button"},on:{click:e.start}},[r("i",{staticClass:"mdi mdi-camera-retake-outline"})]):e._e()])])])])])},A=[];h._withStripped=!0;var v=function(e){e&&e("data-v-36306e52_0",{source:".fullscreen-camera[data-v-36306e52] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.fullscreen-camera .camera-stack[data-v-36306e52] {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  height: 100%;\n}\n.fullscreen-camera .camera-stack .camera-stack-header a.close-button[data-v-36306e52] {\n  position: fixed;\n  top: 5px;\n  right: 15px;\n  color: #fff;\n  font-family: Roboto, Tahoma;\n  font-size: 2.5rem;\n  line-height: 40px;\n  font-weight: 300 !important;\n  z-index: 100;\n}\n.fullscreen-camera .camera-stack .video-wrapper[data-v-36306e52] {\n  height: 100%;\n  width: 100%;\n  align-self: stretch;\n  align-items: center;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.fullscreen-camera .camera-stack .video-wrapper video[data-v-36306e52] {\n  object-fit: cover;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n}\n.fullscreen-camera .camera-stack .video-wrapper .overlay-mask[data-v-36306e52] {\n  max-width: 50vh;\n  max-height: 50vh;\n  width: 100%;\n  height: 100%;\n  margin-top: 10vh;\n}\n.fullscreen-camera .camera-stack .video-wrapper .overlay-mask.visible-overlay[data-v-36306e52] {\n  box-shadow: 0px 0px 2000px 2000px rgba(0, 0, 0, 0.8);\n}\n.fullscreen-camera .camera-stack .video-wrapper .overlay-mask img[data-v-36306e52] {\n  width: 100%;\n}\n.fullscreen-camera .camera-stack .camera-snap[data-v-36306e52] {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  width: 100%;\n  height: 100%;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls[data-v-36306e52] {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  bottom: 0;\n  padding: 5vh 0px;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls.background[data-v-36306e52] {\n  background-color: rgba(0, 0, 0, 0.8) !important;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper[data-v-36306e52] {\n  max-width: 500px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  margin: 0 auto;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot[data-v-36306e52] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0.8;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot a[data-v-36306e52] {\n  color: #fff;\n  border-radius: 100%;\n  font-size: 35pt;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 0px 1px 2px #fff;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot a i[data-v-36306e52]:before {\n  display: block !important;\n  line-height: normal !important;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot a.secondary-button[data-v-36306e52] {\n  font-size: 15pt;\n  padding: 10px;\n}\n\n/*# sourceMappingURL=FullscreenViewCamera.vue.map */",map:{version:3,sources:["D:\\Projects\\easy-vue-camera\\src\\components\\FullscreenViewCamera.vue","FullscreenViewCamera.vue"],names:[],mappings:"AAgMA;EACA,eAAA;EACA,OAAA;EACA,MAAA;EACA,WAAA;EACA,YAAA;AC/LA;ADgMA;EACA,aAAA;EACA,sBAAA;EACA,kBAAA;EACA,YAAA;AC9LA;ADiMA;EACA,eAAA;EACA,QAAA;EACA,WAAA;EACA,WAAA;EACA,2BAAA;EACA,iBAAA;EACA,iBAAA;EACA,2BAAA;EACA,YAAA;AC/LA;ADmMA;EACA,YAAA;EACA,WAAA;EACA,mBAAA;EACA,mBAAA;EACA,kBAAA;EACA,aAAA;EACA,sBAAA;ACjMA;ADkMA;EACA,iBAAA;EACA,kBAAA;EACA,WAAA;EACA,YAAA;EACA,WAAA;AChMA;ADkMA;EACA,eAAA;EACA,gBAAA;EACA,WAAA;EACA,YAAA;EACA,gBAAA;AChMA;ADiMA;EACA,oDAAA;AC/LA;ADiMA;EACA,WAAA;AC/LA;ADmMA;EACA,4BAAA;EACA,2BAAA;EACA,sBAAA;EACA,WAAA;EACA,YAAA;ACjMA;ADmMA;EACA,WAAA;EACA,aAAA;EACA,mBAAA;EACA,eAAA;EACA,SAAA;EACA,gBAAA;ACjMA;ADkMA;EACA,+CAAA;AChMA;ADkMA;EACA,gBAAA;EACA,WAAA;EACA,aAAA;EACA,mBAAA;EACA,cAAA;AChMA;ADiMA;EACA,WAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,YAAA;AC/LA;ADgMA;EACA,WAAA;EACA,mBAAA;EACA,eAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,uBAAA;EACA,gCAAA;AC9LA;ADgMA;EACA,yBAAA;EACA,8BAAA;AC9LA;ADiMA;EACA,eAAA;EACA,aAAA;AC/LA;;AAEA,mDAAmD",file:"FullscreenViewCamera.vue",sourcesContent:['<template>\r\n    <div :style="{\'z-index\': fullscreenZIndex}" class="fullscreen-camera">\r\n        <div class="camera-stack">\r\n            <div class="camera-stack-header">\r\n                <slot name="header"></slot>\r\n                <a  @click="close"\r\n                    class="close-button"\r\n                    role="button"\r\n                    v-if="!hasHeader">&times;</a>\r\n            </div>\r\n            <div class="video-wrapper" v-show="!picture">\r\n                <video :id="videoElementId" autoplay playsinline></video>\r\n                <div :class="{\'visible-overlay\': visibleOverlay}" class="overlay-mask">\r\n                    <img :src="overlayMask" v-if="visibleMask">\r\n                </div>\r\n            </div>\r\n            <canvas :id="canvasElementId" style="display: none"></canvas>\r\n            <div :style="{\'background-image\' : `url(${pictureDataUrl})`}" class="camera-snap" v-show="picture"></div>\r\n            <div :class="{\'background\': !!picture}" class="camera-stack-controls">\r\n                <div class="camera-stack-controls-wrapper">\r\n                    <div class="control-slot">\r\n                        <a @click="visibleMask = !visibleMask" class="secondary-button" role="button" v-if="overlayMask && !picture"><i class="mdi mdi-grid-large"></i></a>\r\n                    </div>\r\n                    <div class="control-slot">\r\n                        <a @click="$emit(\'snap\')" role="button" v-if="!picture"><i class="mdi mdi-circle"></i></a>\r\n                        <a @click="approve" role="button" v-if="picture && mustApprove"><i class="mdi mdi-check"></i></a>\r\n                    </div>\r\n                    <div class="control-slot">\r\n                        <a @click="switchCamera(false)" \r\n                            :disabled="switching" \r\n                            class="secondary-button" \r\n                            role="button" \r\n                            v-if="multiDevice && !picture"><i class="mdi mdi-camera-switch"></i></a>\r\n                        <a @click="start"\r\n                            class="secondary-button"\r\n                            role="button"\r\n                            v-if="picture"><i class="mdi mdi-camera-retake-outline"></i></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuid4 } from \'uuid\';\r\nimport Camera from \'easy-js-camera\';\r\n\r\nexport default {\r\n    computed: {\r\n        hasHeader() {\r\n            return typeof this.$slots.header !== \'undefined\' && this.$slots.header !== null;\r\n        },\r\n        multiDevice() {\r\n            if(!this.camera) return false;\r\n            return this.camera.devices.length > 1;\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            canvasElementId: `canvas-${uuid4().replace(/-/g, \'\')}`,\r\n            canvas: null,\r\n            picture: null,\r\n            pictureDataUrl: null,\r\n            switching: false,\r\n            video: null,\r\n            videoElementId: `video-${uuid4().replace(/-/g, \'\')}`,\r\n            visibleMask: false,\r\n        }\r\n    },\r\n    methods: {\r\n        approve() {\r\n            this.$emit(\'input\', this.picture);\r\n            this.$emit(\'approve\', this.picture);\r\n        },\r\n        close() {\r\n            this.stop();\r\n            this.$emit(\'close\');\r\n        },\r\n        snapAsBlob() {\r\n            if(!this.camera) {\r\n                console.error(\'Camera not found to take a picture\');\r\n                return;\r\n            }            \r\n            return new Promise(resolve => {\r\n                this.camera.snapAsBlob()\r\n                    .then(picture => {\r\n                        this.picture = picture;\r\n                        resolve(picture);\r\n                    });\r\n            });\r\n        }, \r\n        snapAsDataUrl() {\r\n            if(!this.camera) {\r\n                console.error(\'Camera not found to take a picture\');\r\n                return;\r\n            }\r\n            this.picture = this.camera.snapAsDataUrl();\r\n            this.stop();\r\n            if(!this.mustApprove) {\r\n                this.$emit(\'input\', this.picture);\r\n            }\r\n            return this.picture;\r\n        },\r\n        start() {\r\n            if(this.camera) {\r\n                this.picture = null;\r\n                this.$emit(\'input\', null);\r\n                this.$emit(\'loading\', true);\r\n                this.camera.start()\r\n                    .finally(() => this.$emit(\'loading\', false));\r\n                return;\r\n            }\r\n            this.video = document.getElementById(this.videoElementId);\r\n            this.canvas = document.getElementById(this.canvasElementId);\r\n            return new Promise(resolve => {\r\n                Camera.tryInvokePermission(this.video, this.canvas)\r\n                    .then(camera => {\r\n                        this.camera = camera;\r\n                        resolve(camera);\r\n                    });\r\n            });\r\n        },\r\n        stop() {\r\n            if(!this.camera) {\r\n                return;\r\n            }\r\n            this.camera.stop();\r\n        },\r\n        switchCamera(tryAgain = false) {\r\n            if(this.switching && !tryAgain) return;\r\n            if(!this.camera) {\r\n                console.error(\'No camera found to switch...\');\r\n                return;\r\n            }\r\n            this.switching = true;\r\n            return new Promise((resolve, reject) => {\r\n                this.camera.switch(tryAgain)\r\n                    .then(() => {\r\n                        this.switching = false;\r\n                        resolve();\r\n                    })\r\n                    .catch(() => {\r\n                        if(!tryAgain) {\r\n                            this.switchCamera(true);\r\n                        } else {\r\n                            this.switching = false;\r\n                            reject();\r\n                        }\r\n                    })\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        if(this.startOnMounted) {\r\n            this.$emit(\'loading\', true);\r\n            this.start()\r\n                .then(camera => {\r\n                    if(camera) {\r\n                        camera.start();\r\n                    }\r\n                })\r\n                .finally(this.$emit(\'loading\', false));\r\n        }\r\n    },\r\n    name: \'fullscreen-view-camera\',\r\n    props: {\r\n        fullscreenZIndex: Number,\r\n        mustApprove: Boolean,\r\n        overlayMask: String,\r\n        startOnMounted: Boolean,\r\n        visibleOverlay: Boolean,\r\n    },\r\n    watch: {\r\n        picture() {\r\n            if(!this.picture) this.pictureDataUrl = null;\r\n            if(!(this.picture instanceof Blob)) {\r\n                this.pictureDataUrl = this.picture;\r\n            } else {\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(this.picture);\r\n                reader.onload = () => {\r\n                    this.pictureDataUrl = reader.result;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n<\/script>\r\n\r\n<style lang="scss" scoped>\r\n.fullscreen-camera {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    .camera-stack {\r\n        display: flex;\r\n        flex-direction: column;\r\n        position: relative;\r\n        height: 100%;\r\n        .camera-stack-header {\r\n            a {\r\n                &.close-button {\r\n                    position: fixed;\r\n                    top: 5px;\r\n                    right: 15px;\r\n                    color: #fff;\r\n                    font-family: Roboto, Tahoma;\r\n                    font-size: 2.5rem;\r\n                    line-height: 40px;\r\n                    font-weight: 300 !important;\r\n                    z-index: 100;\r\n                }\r\n            }\r\n        }\r\n        .video-wrapper {\r\n            height: 100%;\r\n            width: 100%;\r\n            align-self: stretch;\r\n            align-items: center;\r\n            position: relative;\r\n            display: flex;\r\n            flex-direction: column;\r\n            video {\r\n                object-fit: cover;\r\n                position: absolute;\r\n                width: 100%;\r\n                height: 100%;\r\n                z-index: -1;\r\n            }\r\n            .overlay-mask {\r\n                max-width: 50vh;\r\n                max-height: 50vh;\r\n                width: 100%;\r\n                height: 100%;\r\n                margin-top: 10vh;\r\n                &.visible-overlay {\r\n                    box-shadow: 0px 0px 2000px 2000px rgba(0, 0, 0, .8);\r\n                }\r\n                img {\r\n                    width: 100%;\r\n                }\r\n            }\r\n        }\r\n        .camera-snap {\r\n            background-repeat: no-repeat;\r\n            background-position: center;\r\n            background-size: cover;\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n        .camera-stack-controls {\r\n            width: 100%;\r\n            display: flex;\r\n            align-items: center;\r\n            position: fixed;\r\n            bottom: 0;\r\n            padding: 5vh 0px;\r\n            &.background {\r\n                background-color: rgba(0, 0, 0, .8) !important;\r\n            }\r\n            .camera-stack-controls-wrapper {\r\n                max-width: 500px;\r\n                width: 100%;\r\n                display: flex;\r\n                align-items: center;\r\n                margin: 0 auto;\r\n                .control-slot {\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                    opacity: .8;\r\n                    a {\r\n                        color: #fff;\r\n                        border-radius: 100%;\r\n                        font-size: 35pt;\r\n                        padding: 8px;\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: center;\r\n                        box-shadow: 0px 0px 1px 2px #fff;\r\n                        i {\r\n                            &:before {\r\n                                display: block !important;\r\n                                line-height: normal !important;\r\n                            }\r\n                        }\r\n                        &.secondary-button {\r\n                            font-size: 15pt;\r\n                            padding: 10px;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>',".fullscreen-camera {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.fullscreen-camera .camera-stack {\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  height: 100%;\n}\n.fullscreen-camera .camera-stack .camera-stack-header a.close-button {\n  position: fixed;\n  top: 5px;\n  right: 15px;\n  color: #fff;\n  font-family: Roboto, Tahoma;\n  font-size: 2.5rem;\n  line-height: 40px;\n  font-weight: 300 !important;\n  z-index: 100;\n}\n.fullscreen-camera .camera-stack .video-wrapper {\n  height: 100%;\n  width: 100%;\n  align-self: stretch;\n  align-items: center;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n.fullscreen-camera .camera-stack .video-wrapper video {\n  object-fit: cover;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n}\n.fullscreen-camera .camera-stack .video-wrapper .overlay-mask {\n  max-width: 50vh;\n  max-height: 50vh;\n  width: 100%;\n  height: 100%;\n  margin-top: 10vh;\n}\n.fullscreen-camera .camera-stack .video-wrapper .overlay-mask.visible-overlay {\n  box-shadow: 0px 0px 2000px 2000px rgba(0, 0, 0, 0.8);\n}\n.fullscreen-camera .camera-stack .video-wrapper .overlay-mask img {\n  width: 100%;\n}\n.fullscreen-camera .camera-stack .camera-snap {\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  width: 100%;\n  height: 100%;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  position: fixed;\n  bottom: 0;\n  padding: 5vh 0px;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls.background {\n  background-color: rgba(0, 0, 0, 0.8) !important;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper {\n  max-width: 500px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  margin: 0 auto;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0.8;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot a {\n  color: #fff;\n  border-radius: 100%;\n  font-size: 35pt;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0px 0px 1px 2px #fff;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot a i:before {\n  display: block !important;\n  line-height: normal !important;\n}\n.fullscreen-camera .camera-stack .camera-stack-controls .camera-stack-controls-wrapper .control-slot a.secondary-button {\n  font-size: 15pt;\n  padding: 10px;\n}\n\n/*# sourceMappingURL=FullscreenViewCamera.vue.map */"]},media:void 0})},f="data-v-36306e52",g=void 0,w=!1,C=o({render:h,staticRenderFns:A},v,p,f,w,g,!1,u,void 0,void 0),y={data:function(){return{camera:null,canvasElementId:"canvas-"+Object(t["a"])().replace(/-/g,""),canvas:null,picture:null,switching:!1,video:null,videoElementId:"video-"+Object(t["a"])().replace(/-/g,""),visibleMask:!1}},methods:{snapAsBlob:function(){var e=this;if(this.camera)return new Promise((function(n){e.camera.snapAsBlob().then((function(r){e.picture=r,n(r)}))}));console.error("Camera not found to take a picture")},snapAsDataUrl:function(){if(this.camera)return this.picture=this.camera.snapAsDataUrl(),this.stop(),this.picture;console.error("Camera not found to take a picture")},start:function(){var e=this;return this.camera?(this.picture=null,this.$emit("loading",!0),void this.camera.start().finally((function(){return e.$emit("loading",!1)}))):(this.video=document.getElementById(this.videoElementId),this.canvas=document.getElementById(this.canvasElementId),new Promise((function(n){i.a.tryInvokePermission(e.video,e.canvas).then((function(r){e.camera=r,n(r)}))})))},stop:function(){this.camera&&this.camera.stop()},switchCamera:function(e){var n=this;if(void 0===e&&(e=!1),!this.switching||e){if(this.camera)return this.switching=!0,new Promise((function(r,t){n.camera.switch(e).then((function(){n.switching=!1,r()})).catch((function(){e?(n.switching=!1,t()):n.switchCamera(!0)}))}));console.error("No camera found to switch...")}},toggleMask:function(){this.visibleMask=!this.visibleMask}},mounted:function(){this.startOnMounted&&(this.$emit("loading",!0),this.start().then((function(e){e&&e.start()})).finally(this.$emit("loading",!1)))},name:"standard-view-camera",props:{overlayMask:String,startOnMounted:Boolean,visibleOverlay:Boolean}},b=y,k=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"video-wrapper"},[r("video",{directives:[{name:"show",rawName:"v-show",value:!e.picture,expression:"!picture"}],attrs:{id:e.videoElementId,autoplay:"",playsinline:""}}),e._v(" "),r("canvas",{directives:[{name:"show",rawName:"v-show",value:e.picture,expression:"picture"}],attrs:{id:e.canvasElementId}}),e._v(" "),r("div",{staticClass:"overlay",class:{"visible-overlay":e.visibleOverlay}},[e.visibleMask?r("img",{attrs:{src:e.overlayMask}}):e._e()])])},E=[];k._withStripped=!0;var x=function(e){e&&e("data-v-17eb9e5b_0",{source:".video-wrapper[data-v-17eb9e5b] {\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n.video-wrapper video[data-v-17eb9e5b] {\n  width: 100%;\n  height: auto;\n}\n.video-wrapper canvas[data-v-17eb9e5b] {\n  width: 100%;\n  height: auto;\n}\n.video-wrapper .overlay[data-v-17eb9e5b] {\n  position: absolute;\n  left: 100%;\n  transform: translateX(-50%);\n  height: 100%;\n  width: auto;\n  display: flex;\n}\n.video-wrapper .overlay.visible-overlay[data-v-17eb9e5b] {\n  box-shadow: 0px 0px 2000px 2000px rgba(0, 0, 0, 0.8);\n}\n.video-wrapper .overlay img[data-v-17eb9e5b] {\n  height: auto;\n}\n\n/*# sourceMappingURL=StandardViewCamera.vue.map */",map:{version:3,sources:["D:\\Projects\\easy-vue-camera\\src\\components\\StandardViewCamera.vue","StandardViewCamera.vue"],names:[],mappings:"AA0HA;EACA,gBAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;ACzHA;AD0HA;EACA,WAAA;EACA,YAAA;ACxHA;AD0HA;EACA,WAAA;EACA,YAAA;ACxHA;AD0HA;EACA,kBAAA;EACA,UAAA;EACA,2BAAA;EACA,YAAA;EACA,WAAA;EACA,aAAA;ACxHA;ADyHA;EACA,oDAAA;ACvHA;ADyHA;EACA,YAAA;ACvHA;;AAEA,iDAAiD",file:"StandardViewCamera.vue",sourcesContent:["<template>\r\n    <div class=\"video-wrapper\">\r\n        <video :id=\"videoElementId\" autoplay playsinline v-show=\"!picture\"></video>\r\n        <canvas :id=\"canvasElementId\" v-show=\"picture\"></canvas>\r\n        <div :class=\"{'visible-overlay': visibleOverlay}\" class=\"overlay\">\r\n            <img :src=\"overlayMask\" v-if=\"visibleMask\">\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuid4 } from 'uuid';\r\nimport Camera from 'easy-js-camera';\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            canvasElementId: `canvas-${uuid4().replace(/-/g, '')}`,\r\n            canvas: null,\r\n            picture: null,\r\n            switching: false,\r\n            video: null,\r\n            videoElementId: `video-${uuid4().replace(/-/g, '')}`,\r\n            visibleMask: false,\r\n        }\r\n    },\r\n    methods: {\r\n        snapAsBlob() {\r\n            if(!this.camera) {\r\n                console.error('Camera not found to take a picture');\r\n                return;\r\n            }            \r\n            return new Promise(resolve => {\r\n                this.camera.snapAsBlob()\r\n                    .then(picture => {\r\n                        this.picture = picture;\r\n                        resolve(picture);\r\n                    });\r\n            });\r\n        }, \r\n        snapAsDataUrl() {\r\n            if(!this.camera) {\r\n                console.error('Camera not found to take a picture');\r\n                return;\r\n            }\r\n            this.picture = this.camera.snapAsDataUrl();\r\n            this.stop();\r\n            return this.picture;\r\n        },\r\n        start() {\r\n            if(this.camera) {\r\n                this.picture = null;\r\n                this.$emit('loading', true);\r\n                this.camera.start()\r\n                    .finally(() => this.$emit('loading', false));\r\n                return;\r\n            }\r\n            this.video = document.getElementById(this.videoElementId);\r\n            this.canvas = document.getElementById(this.canvasElementId);\r\n            return new Promise(resolve => {\r\n                Camera.tryInvokePermission(this.video, this.canvas)\r\n                    .then(camera => {\r\n                        this.camera = camera;\r\n                        resolve(camera);\r\n                    });\r\n            });\r\n        },\r\n        stop() {\r\n            if(!this.camera) {\r\n                return;\r\n            }\r\n            this.camera.stop();\r\n        },\r\n        switchCamera(tryAgain = false) {\r\n            if(this.switching && !tryAgain) return;\r\n            if(!this.camera) {\r\n                console.error('No camera found to switch...');\r\n                return;\r\n            }\r\n            this.switching = true;\r\n            return new Promise((resolve, reject) => {\r\n                this.camera.switch(tryAgain)\r\n                    .then(() => {\r\n                        this.switching = false;\r\n                        resolve();\r\n                    })\r\n                    .catch(() => {\r\n                        if(!tryAgain) {\r\n                            this.switchCamera(true);\r\n                        } else {\r\n                            this.switching = false;\r\n                            reject();\r\n                        }\r\n                    })\r\n            });\r\n        },\r\n        toggleMask() {\r\n            this.visibleMask = !this.visibleMask;\r\n        }\r\n    },\r\n    mounted() {\r\n        if(this.startOnMounted) {\r\n            this.$emit('loading', true);\r\n            this.start()\r\n                .then(camera => {\r\n                    if(camera) {\r\n                        camera.start();\r\n                    }\r\n                })\r\n                .finally(this.$emit('loading', false));\r\n        }\r\n    },\r\n    name: 'standard-view-camera',\r\n    props: {\r\n        overlayMask: String,\r\n        startOnMounted: Boolean,\r\n        visibleOverlay: Boolean\r\n    }\r\n}\r\n<\/script>\r\n<style lang=\"scss\" scoped>\r\n.video-wrapper {\r\n    overflow: hidden;\r\n    display: flex;\r\n    align-items: center;\r\n    position: relative;\r\n    video {\r\n        width: 100%;\r\n        height: auto;\r\n    }\r\n    canvas {\r\n        width: 100%;\r\n        height: auto;\r\n    }\r\n    .overlay {\r\n        position: absolute;\r\n        left: 100%;\r\n        transform: translateX(-50%);\r\n        height: 100%;\r\n        width: auto;\r\n        display: flex;\r\n        &.visible-overlay {\r\n            box-shadow: 0px 0px 2000px 2000px rgba(0, 0, 0, .8);\r\n        }\r\n        img {\r\n            height: auto;\r\n        }\r\n    }\r\n}\r\n</style>",".video-wrapper {\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n.video-wrapper video {\n  width: 100%;\n  height: auto;\n}\n.video-wrapper canvas {\n  width: 100%;\n  height: auto;\n}\n.video-wrapper .overlay {\n  position: absolute;\n  left: 100%;\n  transform: translateX(-50%);\n  height: 100%;\n  width: auto;\n  display: flex;\n}\n.video-wrapper .overlay.visible-overlay {\n  box-shadow: 0px 0px 2000px 2000px rgba(0, 0, 0, 0.8);\n}\n.video-wrapper .overlay img {\n  height: auto;\n}\n\n/*# sourceMappingURL=StandardViewCamera.vue.map */"]},media:void 0})},M="data-v-17eb9e5b",B=void 0,D=!1,$=o({render:k,staticRenderFns:E},x,b,M,D,B,!1,u,void 0,void 0),_={dataUrl:"dataUrl",blob:"blob"},I=function(){};I.isTouchScreen=function(){var e=navigator.maxTouchPoints>0||"ontouchstart"in document.documentElement;return e};var S={components:{FullscreenViewCamera:C,StandardViewCamera:$},computed:{isTouchScreen:function(){return I.isTouchScreen()},multiDevice:function(){return!!this.refCameraComponent&&this.refCameraComponent.camera.devices.length>1},refCameraComponent:function(){return this.refFullscreenCamera?this.refFullscreenCamera:this.refStandardCamera},refFullscreenCamera:function(){return this.$refs.fullscreenCameraRef},refStandardCamera:function(){return this.$refs.standardCameraRef},viewFullscreen:function(){return this.fullscreen||this.isTouchScreen&&this.autoDetectMobile},viewStandard:function(){return!this.viewFullscreen}},data:function(){return{camera:null}},methods:{close:function(){this.refFullscreenCamera?this.refFullscreenCamera.close():(this.stop(),this.$emit("close"))},snap:function(){var e=this;if(this.output===_.dataUrl){var n=this.refCameraComponent.snapAsDataUrl();this.stop(),this.mustApprove&&this.fullscreen||this.$emit("input",n)}else this.$emit("loading",!0),this.refCameraComponent.snapAsBlob().then((function(n){e.stop(),e.mustApprove&&e.fullscreen||e.$emit("input",n)})).finally((function(){return e.$emit("loading",!1)}))},start:function(){var e=this;this.$emit("loading",!0),this.refCameraComponent.start((function(n){n&&(e.$emit("loading",!0),n.start().finally((function(){return e.$emit("loading",!1)})))}))},stop:function(){null!==this.refCameraComponent&&this.refCameraComponent.stop()},switchCamera:function(){var e=this;this.refCameraComponent&&(this.$emit("loading",!0),this.refCameraComponent.switchCamera(!1).finally((function(){return e.$emit("loading",!1)})))},toggleMask:function(){this.refStandardCamera&&this.refStandardCamera.toggleMask()}},name:"easy-camera",props:{autoDetectMobile:{type:Boolean,default:!0},fullscreen:Boolean,fullscreenZIndex:{type:Number,default:17},mustApprove:{type:Boolean,default:!1},output:{type:String,default:_.dataUrl},overlayMask:{type:String,default:null},startOnMounted:{type:Boolean,default:!0},value:{},visibleOverlay:Boolean}},U=S,R=function(){var e=this,n=this,r=n.$createElement,t=n._self._c||r;return n.viewFullscreen?t("fullscreen-view-camera",{ref:"fullscreenCameraRef",attrs:{"fullscreen-z-index":n.fullscreenZIndex,"must-approve":n.mustApprove,"overlay-mask":n.overlayMask,"start-on-mounted":n.startOnMounted,"visible-overlay":n.visibleOverlay},on:{approve:function(n){e.$emit("approve",n),e.$emit("input",n)},loading:function(n){e.$emit("loading",n)},snap:n.snap,close:function(e){return n.$emit("close")}},scopedSlots:n._u([{key:"header",fn:function(){return[n._t("header")]},proxy:!0}],null,!0)}):t("standard-view-camera",{ref:"standardCameraRef",attrs:{"overlay-mask":n.overlayMask,"start-on-mounted":n.startOnMounted,"visible-overlay":n.visibleOverlay},on:{loading:function(n){e.$emit("loading",!0)}}})},O=[];R._withStripped=!0;var j=void 0,P=void 0,F=void 0,z=!1,L=o({render:R,staticRenderFns:O},j,U,P,z,F,!1,void 0,void 0,void 0);function V(e){V.installed||(V.installed=!0,e.component("v-easy-camera",L))}var T={install:V},H=null;"undefined"!==typeof window?H=window.Vue:"undefined"!==typeof e&&(H=e.Vue),H&&H.use(T),n["a"]=L}).call(this,r("c8ba"))},"995e":function(e,n,r){"use strict";r.r(n);var t=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[e.noFrontCamera?r("p",{staticClass:"error"},[e._v("\n    You don't seem to have a front camera on your device\n  ")]):e._e(),e.noRearCamera?r("p",{staticClass:"error"},[e._v("\n    You don't seem to have a rear camera on your device\n  ")]):e._e(),r("qrcode-stream",{attrs:{camera:e.camera},on:{init:e.onInit}},[r("button",{on:{click:e.switchCamera}},[r("img",{attrs:{src:e.$withBase("/camera-switch.svg"),alt:"switch camera"}})])])],1)},a=[],i=r("a34a"),s=r.n(i);var o=r("bb6f"),c=r("98f5");function l(e,n,r,t,a,i,s){try{var o=e[i](s),c=o.value}catch(l){return void r(l)}o.done?n(c):Promise.resolve(c).then(t,a)}function u(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function s(e){l(i,t,a,s,o,"next",e)}function o(e){l(i,t,a,s,o,"throw",e)}s(void 0)}))}}var d={components:{QrcodeStream:o["QrcodeStream"],QrcodeReader:QrcodeReader,"v-easy-camera":c["a"]},data:function(){return{camera:"rear",noRearCamera:!1,noFrontCamera:!1}},methods:{switchCamera:function(){switch(this.camera){case"front":this.camera="rear";break;case"rear":this.camera="front";break}},onInit:function(){var e=u(s.a.mark((function e(n){var r,t,a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:e.next=13;break;case 5:e.prev=5,e.t0=e["catch"](0),r="front"===this.camera,t="rear"===this.camera,a="OverconstrainedError"===e.t0.name,t&&a&&(this.noRearCamera=!0),r&&a&&(this.noFrontCamera=!0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,5]])})));function n(n){return e.apply(this,arguments)}return n}()}},m=d,p=(r("2bee"),r("2877")),h=Object(p["a"])(m,t,a,!1,null,"58117cc7",null);n["default"]=h.exports},b2fe:function(e,n,r){},b935:function(e,n,r){"use strict";var t,a=new Uint8Array(16);function i(){if(!t&&(t="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(a)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function o(e){return"string"===typeof e&&s.test(e)}for(var c=o,l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[e[n+0]]+l[e[n+1]]+l[e[n+2]]+l[e[n+3]]+"-"+l[e[n+4]]+l[e[n+5]]+"-"+l[e[n+6]]+l[e[n+7]]+"-"+l[e[n+8]]+l[e[n+9]]+"-"+l[e[n+10]]+l[e[n+11]]+l[e[n+12]]+l[e[n+13]]+l[e[n+14]]+l[e[n+15]]).toLowerCase();if(!c(r))throw TypeError("Stringified UUID is invalid");return r}var m=d;function p(e,n,r){e=e||{};var t=e.random||(e.rng||i)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,n){r=r||0;for(var a=0;a<16;++a)n[r+a]=t[a];return n}return m(t)}n["a"]=p},db16:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Constraints=void 0;var t=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),a=r("1ec4"),i=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var c=n.Constraints=function(){function e(){o(this,e),this.video={facingMode:"user"},this.audio=!1}return t(e,[{key:"switchFacingMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"user"===this.video.facingMode?this.video.facingMode="environment":this.video.facingMode=e?{exact:"environment"}:"user",this}},{key:"getConstraint",value:function(){return{video:this.video,audio:this.audio}}}]),e}(),l=function(){function e(n,r){o(this,e),this.devices=[],this.stream=null,this.canvasElement=r,this.videoElement=n,this.constraints=new c}return t(e,[{key:"getDevices",value:function(){var e=this;return new Promise((async function(n,r){if(e.devices.length>0)n(e.devices);else try{var t=await navigator.mediaDevices.enumerateDevices();t.forEach((function(n){n.kind&&"videoinput"===n.kind.toLocaleLowerCase()&&e.devices.push(new i.default(n))})),n(e.devices)}catch(a){console.error("GetDevices",a),r(a)}}))}},{key:"setVideoConstraints",value:function(e){return this.constraints||(this.constraints=new c),this.constraints.video=e,this}},{key:"snap",value:function(){this.canvasElement.width=this.videoElement.videoWidth,this.canvasElement.height=this.videoElement.videoHeight;var e=this.canvasElement.getContext("2d");return e.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height),this.canvasElement}},{key:"snapAsDataUrl",value:function(){this.snap();var e=this.canvasElement.toDataURL("image/png");return e}},{key:"snapAsBlob",value:function(){var e=this;return this.snap(),new Promise((function(n){e.canvasElement.toBlob((function(e){n(e)}),"image/png",1)}))}},{key:"start",value:function(){var e=this;return new Promise((async function(n,r){try{await e.getDevices();var t=await navigator.mediaDevices.getUserMedia(e.constraints.getConstraint());e.videoElement.srcObject=t,e.stream=t,n()}catch(a){console.error("StartCamera",a),r(a)}}))}},{key:"stop",value:function(){if(this.stream){var e=this.videoElement.srcObject.getTracks();e.forEach((function(e){return e.stop()}))}}},{key:"switch",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((async function(r,t){e.constraints=e.constraints.switchFacingMode(n),e.stop();try{await e.start(),r()}catch(a){console.error("SwitchCamera",a),t(a)}}))}}],[{key:"isCameraSupported",value:function(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices}},{key:"tryInvokePermission",value:function(n,r){return new Promise((async function(t,a){try{await navigator.mediaDevices.getUserMedia(new c),t(new e(n,r))}catch(i){console.error("MediaDevices",i),a(i)}}))}}]),e}();n.default=l}}]);
//# sourceMappingURL=chunk-92f5d2a0.1e12684b.js.map